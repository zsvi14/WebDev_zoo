<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" href="../../CSS_JS/style_siham.css">
    <title>Liste des Enclos</title>
</head>
<header>
    <button class="home-button" onclick="window.location.href='../connexion/home.html';">Retour à l'accueil</button>
    <h1 class="park-name">Le super parc</h1>
</header>

<body>
    <h1 id="title_enclos">Liste des Enclos</h1>
  
    <!-- Conteneur des enclos -->
    <div id="enclos-container">
        <!-- La liste des enclos sera affichée ici dynamiquement -->
    </div>

    <script>
        // Fonction pour afficher les enclos sur la page
        function afficherEnclos(data) {
    const container = document.getElementById('enclos-container');
    container.innerHTML = ''; // Vider le conteneur avant de le remplir

    if (!data || data.length === 0) {
        container.innerHTML = '<p>Aucun enclos trouvé.</p>';
        return;
    }

    // Afficher chaque enclos
    data.forEach(enclos => {
        const enclosDiv = document.createElement('div');
        enclosDiv.classList.add('enclos');

        // Titre de l'enclos
        const enclosTitle = document.createElement('h3');
        enclosTitle.textContent = `${enclos.nom_enclos} (Biome : ${enclos.biome})`;

        // Appliquer la couleur depuis la BDD
        enclosTitle.style.color = enclos.couleur;

        enclosDiv.appendChild(enclosTitle);

        // Liste des animaux
        if (enclos.nom_animal) {
            const animalItem = document.createElement('p');
            animalItem.textContent = enclos.nom_animal;
            enclosDiv.appendChild(animalItem);
        } else {
            const noAnimalText = document.createElement('p');
            noAnimalText.textContent = 'Aucun animal dans cet enclos.';
            enclosDiv.appendChild(noAnimalText);
        }

        container.appendChild(enclosDiv);
    });
}


        // Fonction pour récupérer la liste des enclos depuis le fichier PHP
        function fetchEnclos() {
            fetch('http://localhost/Zoo/WebDev_zoo/back/routes/enclos.php')  // L'URL de votre fichier PHP
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erreur HTTP : ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Données récupérées :', data); // Affiche les données dans la console
                    afficherEnclos(data);  // Affiche les enclos récupérés
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération des données :', error);
                    const container = document.getElementById('enclos-container');
                    container.innerHTML = '<p>Erreur lors du chargement des enclos.</p>';
                });
        }

        // Appeler la fonction au chargement de la page pour récupérer et afficher les enclos
        window.onload = fetchEnclos;
    </script>

</body>
</html>
